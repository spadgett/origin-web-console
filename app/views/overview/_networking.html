<div ng-if="networking.services | hashSize" class="expanded-section">
  <div class="component-label">Networking</div>
  <div ng-repeat="service in networking.services" class="row">
    <div class="col-sm-3">
      <div class="component-label">Service &ndash; Internal Traffic</div>
      <h3 class="mar-top-xs">
        <a ng-href="{{service | navigateResourceURL}}">{{service.metadata.name}}</a>
      </h3>
      <span class="text-muted mar-right-xs">
        <span data-icon="î€²" aria-hidden="true" style="font-size: 16px; vertical-align: -2px;"></span>
      </span>
      <label>Ports:</label>
      <span ng-repeat="portMapping in service.spec.ports | limitTo : 1">
        {{portMapping.port}} <i class="fa fa-long-arrow-right text-muted"></i>
        {{portMapping.targetPort}} ({{portMapping.protocol}})
      </span>
      <span ng-if="service.spec.ports.length >= 2">
        and
        <span class="nowrap">
          {{service.spec.ports.length - 1}}
          <span ng-if="service.spec.ports.length > 2">others</span>
          <span ng-if="service.spec.ports.length === 2">other</span>
        </span>
      </span>
    </div>
    <div class="col-sm-9">
      <div class="component-label">Routes &ndash; External Traffic</div>
      <div ng-if="networking.routesByService[service.metadata.name] | hashSize" class="row">
        <div ng-repeat="route in networking.routesByService[service.metadata.name] | limitTo : 2 track by (route | uid)" class="overview-routes">
          <h3 ng-class="{
              'col-sm-12': !(route | hasAlternateBackends),
              'col-sm-7': (route | hasAlternateBackends)
            }">
            <div class="overview-route-link">
              <span ng-if="route | isWebRoute">
                <a ng-href="{{route | routeWebURL}}" target="_blank">{{route | routeLabel}}</a>
                <i class="fa fa-external-link small" aria-hidden="true"></i>
              </span>
              <span ng-if="!(route | isWebRoute)">{{route | routeLabel}}</span>
              <route-warnings route="route" service="service"></route-warnings>
            </div>
            <small class="nowrap">Route <a ng-href="{{route | navigateResourceURL}}">{{route.metadata.name}}</a></small>
          </h3>
          <div ng-if="route | hasAlternateBackends" class="col-sm-5 mar-bottom-xl">
            <route-service-pie route="route" small="true"></route-service-pie>
          </div>
        </div>
      </div>
      <div ng-if="!(networking.routesByService[service.metadata.name] | hashSize)">
        <a ng-if="'routes' | canI : 'create'" ng-href="project/{{service.metadata.namespace}}/create-route?service={{service.metadata.name}}">Create Route</a>
        <span ng-if="!('routes' | canI : 'create')" class="text-muted">No Routes</span>
      </div>
    </div>
  </div>
</div>
